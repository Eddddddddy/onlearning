<!doctype html>
<html lang="zh-CN">
<head>
    <title>管理后台</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link href="https://fonts.googleapis.com/css?family=Poppins:300,400,500,600,700,800,900" rel="stylesheet">
    <!-- 引入 echarts.js -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/dist/extension/dataTool.min.js"></script>


    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-gl@2/dist/echarts-gl.min.js"></script>


    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts-stat@latest/dist/ecStat.min.js"></script>


    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/map/js/china.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/map/js/world.js"></script>
    <!-- bootstrap css -->
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <!-- style css -->
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <!-- Responsive-->
    <link rel="stylesheet" href="/css/responsive.css">

    <script type="text/javascript"
            src="https://api.map.baidu.com/api?v=2.0&ak=5TiRITkawh1t8BI03EWRFOKrGvmgLUBq"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/dist/extension/bmap.min.js"></script>
    <script src="https://apps.bdimg.com/libs/jquery/2.1.4/jquery.min.js"></script>


    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/styled.css">
    <link rel="shortcut icon" href="favicon.ico">
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/animate.css" rel="stylesheet">
</head>
<body>

<div class="wrapper d-flex align-items-stretch">
    <nav id="sidebar">
        <div class="custom-menu">
            <button type="button" id="sidebarCollapse" class="btn btn-primary">
            </button>
        </div>
        <div class="img bg-wrap text-center py-4" style="background-image: url(images/bg_1.jpg);">
            <div class="user-logo">
                <h3>后台管理</h3>
            </div>
        </div>
        <ul class="list-unstyled components mb-5">
            <li>
                <a href="/dashboard"><span class="fa fa-home mr-3"></span> 主页</a>
            </li>
            <li>
                <a href="/dashboard/article"><span class="fa fa-file-text mr-3"></span> 文章编辑</a>
            </li>
            <li class="active">
                <a href="/dashboard/user"><span class="fa fa-user mr-3"></span> 用户管理</a>
            </li>
            <li>
                <a href="/dashboard/comment"><span class="fa fa-comments mr-3"></span> 评论管理</a>
            </li>
            <li>
                <a href="/user/logoff"><span class="fa fa-sign-out mr-3"></span> 退出</a>
            </li>
        </ul>

    </nav>
    <!--___________________________________________________________________________________________________________________________________-->
    <!-- Page Content  -->
    <div id="content" class="row p-4 p-md-5 pt-5">
        <br>
        <br>



        <div id="user" class="col-12" style="top: 35px;">
            <!--            <div class="row"-->
            <!--                 style="background-color: #ffffff;padding: 10px;box-shadow: 0px 0 30px 10px #f0f0f0;margin-bottom: 20px;">-->
            <!--                <div class="col-10">-->
            <!--                    <div class="row">-->
            <!--                        <div class="col-2" style="padding-top: 15px;"><h6>姓名：王定一</h6></div>-->
            <!--                        <div class="col-4" style="padding-top: 15px;"><h6>Email：854214642@qq.com</h6></div>-->
            <!--                        <div class="col-4" style="padding-top: 15px;"><h6>注册时间：2021-03-18 15:28:50</h6></div>-->
            <!--                        <div class="col-2" style="padding-top: 15px;"><h6>id：12345678</h6></div>-->
            <!--                    </div>-->
            <!--                </div>-->
            <!--                <div class="input-group col-2">-->
            <!--                    <div class="input-group-append">-->
            <!--                        <button class="btn btn-secondary" type="button" id="frozenButton"-->
            <!--                                style="background-color: #f26522; border-color:#f26522 ">-->
            <!--                            <i class="fa fa-commenting"></i><span class="padding_10">冻结</span>-->
            <!--                        </button>-->
            <!--                        <button class="btn btn-secondary" type="button" id="deleteButton"-->
            <!--                                style="background-color: #f26522; border-color:#f26522 ">-->
            <!--                            <i class="fa fa-commenting"></i><span class="padding_10">删除</span>-->
            <!--                        </button>-->
            <!--                    </div>-->
            <!--                </div>-->
            <!--            </div>-->

        </div>
    </div>
    <div id="searchDiv" class="" style="position: fixed; top:30px; left: 350px; width: 1000px; z-index: 9999;">
        <div class="input-group" style="box-shadow: 0px 0 30px 10px #bbbbbb75;">
            <input type="text" class="form-control" name="keyword" id="searchText" placeholder="搜索用户">
            <div class="input-group-append">
                <button class="btn btn-secondary" onclick="searchUser()"
                        style="background-color: #f26522; border-color:#f26522 ">
                    <i class="fa fa-search"></i>
                </button>
            </div>
        </div>
        <br>
    </div>
    <!--___________________________________________________________________________________________________________________________________-->
</div>

<script type="text/javascript">

    window.onresize=searchDivWidth;
    window.onload = searchDivWidth;

    function searchDivWidth(){
        document.getElementById("searchDiv").style.width = window.innerWidth - 400 + 'px';
    }

    Date.prototype.format = function (fmt) {
        var o = {
            "M+": this.getMonth() + 1,                   //月份
            "d+": this.getDate(),                        //日
            "h+": this.getHours(),                       //小时
            "m+": this.getMinutes(),                     //分
            "s+": this.getSeconds(),                     //秒
            "q+": Math.floor((this.getMonth() + 3) / 3), //季度
            "S": this.getMilliseconds()                  //毫秒
        };

        //  获取年份
        // ①
        if (/(y+)/i.test(fmt)) {
            fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
        }

        for (var k in o) {
            // ②
            if (new RegExp("(" + k + ")", "i").test(fmt)) {
                fmt = fmt.replace(
                    RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
            }
        }
        return fmt;
    }

    $(document).ready(function () {
        $.get("/df", {}, function (users) {
            var html = "";
            for (var user of users) {
                var date = new Date(user.u_date);
                if (user.u_state == 1) {
                    var html_state = "<button class=\"btn btn-secondary\" onclick=\"button1_click(this)\" type=\"button\" id=\"" +
                        "" + user.u_id +
                        "\"\n" +
                        "                                style=\"background-color: #f26522; border-color:#f26522 \">\n" +
                        "                            <i class=\"fa fa-commenting\"></i><span class=\"padding_10\">冻结";
                } else {
                    var html_state = "<button class=\"btn btn-secondary\" onclick=\"button3_click(this)\" type=\"button\" id=\"" +"" + user.u_id +
                        "\"\n" +
                        "                                style=\"background-color: #f26522; border-color:#f26522 \">\n" +
                        "                            <i class=\"fa fa-commenting\"></i><span class=\"padding_10\">解冻";
                }
                html = html + "<div class=\"row\"\n" +
                    "                 style=\"background-color: #ffffff;padding: 10px;box-shadow: 0px 0 30px 10px #f0f0f0;margin-bottom: 20px;\">\n" +
                    "                <div class=\"col-10\">\n" +
                    "                    <div class=\"row\">\n" +
                    "                        <div class=\"col-2\" style=\"padding-top: 15px;\"><h6>姓名：" +
                    user.u_name +
                    "</h6></div>\n" +
                    "                        <div class=\"col-4\" style=\"padding-top: 15px;\"><h6>Email：" +
                    user.u_email +
                    "</h6></div>\n" +
                    "                        <div class=\"col-4\" style=\"padding-top: 15px;\"><h6>注册时间：" +
                    date.format("YYYY-MM-DD HH:MM:SS") +
                    "</h6></div>\n" +
                    "                        <div class=\"col-2\" style=\"padding-top: 15px;\"><h6>id：" +
                    user.u_id +
                    "</h6></div>\n" +
                    "                    </div>\n" +
                    "                </div>\n" +
                    "                <div class=\"input-group col-2\">\n" +
                    "                    <div class=\"input-group-append\">\n" +
                    html_state +
                    "</span>\n" +
                    "                        </button>\n" +
                    "                        <button class=\"btn btn-secondary\" onclick=\"button2_click(this)\" type=\"button\" id=\"" +
                    user.u_id +
                    "\"\n" +
                    "                                style=\"background-color: #f26522; border-color:#f26522 \">\n" +
                    "                            <i class=\"fa fa-commenting\"></i><span class=\"padding_10\">删除</span>\n" +
                    "                        </button>\n" +
                    "                    </div>\n" +
                    "                </div>\n" +
                    "            </div>";
            }
            document.getElementById("user").innerHTML = html;
        })
    });

    function button1_click(button) {
        $.get("/dg", {u_id: button.id}, function (users) {
            var html = "";
            for (var user of users) {
                var date = new Date(user.u_date);
                if (user.u_state == 1) {
                    var html_state = "<button class=\"btn btn-secondary\" onclick=\"button1_click(this)\" type=\"button\" id=\"" +
                        "" + user.u_id +
                        "\"\n" +
                        "                                style=\"background-color: #f26522; border-color:#f26522 \">\n" +
                        "                            <i class=\"fa fa-commenting\"></i><span class=\"padding_10\">冻结";
                } else {
                    var html_state = "<button class=\"btn btn-secondary\" onclick=\"button3_click(this)\" type=\"button\" id=\"" +"" + user.u_id +
                        "\"\n" +
                        "                                style=\"background-color: #f26522; border-color:#f26522 \">\n" +
                        "                            <i class=\"fa fa-commenting\"></i><span class=\"padding_10\">解冻";
                }
                html = html + "<div class=\"row\"\n" +
                    "                 style=\"background-color: #ffffff;padding: 10px;box-shadow: 0px 0 30px 10px #f0f0f0;margin-bottom: 20px;\">\n" +
                    "                <div class=\"col-10\">\n" +
                    "                    <div class=\"row\">\n" +
                    "                        <div class=\"col-2\" style=\"padding-top: 15px;\"><h6>姓名：" +
                    user.u_name +
                    "</h6></div>\n" +
                    "                        <div class=\"col-4\" style=\"padding-top: 15px;\"><h6>Email：" +
                    user.u_email +
                    "</h6></div>\n" +
                    "                        <div class=\"col-4\" style=\"padding-top: 15px;\"><h6>注册时间：" +
                    date.format("YYYY-MM-DD HH:MM:SS") +
                    "</h6></div>\n" +
                    "                        <div class=\"col-2\" style=\"padding-top: 15px;\"><h6>id：" +
                    user.u_id +
                    "</h6></div>\n" +
                    "                    </div>\n" +
                    "                </div>\n" +
                    "                <div class=\"input-group col-2\">\n" +
                    "                    <div class=\"input-group-append\">\n" +
                    html_state +
                    "</span>\n" +
                    "                        </button>\n" +
                    "                        <button class=\"btn btn-secondary\" onclick=\"button2_click(this)\" type=\"button\" id=\"" +
                    user.u_id +
                    "\"\n" +
                    "                                style=\"background-color: #f26522; border-color:#f26522 \">\n" +
                    "                            <i class=\"fa fa-commenting\"></i><span class=\"padding_10\">删除</span>\n" +
                    "                        </button>\n" +
                    "                    </div>\n" +
                    "                </div>\n" +
                    "            </div>";
            }
            document.getElementById("user").innerHTML = html;
        })
    }

    function button3_click(button) {
        $.get("/dh", {u_id: button.id}, function (users) {
            var html = "";
            for (var user of users) {
                var date = new Date(user.u_date);
                if (user.u_state == 1) {
                    var html_state = "<button class=\"btn btn-secondary\" onclick=\"button1_click(this)\" type=\"button\" id=\"" +
                        "" + user.u_id +
                        "\"\n" +
                        "                                style=\"background-color: #f26522; border-color:#f26522 \">\n" +
                        "                            <i class=\"fa fa-commenting\"></i><span class=\"padding_10\">冻结";
                } else {
                    var html_state = "<button class=\"btn btn-secondary\" onclick=\"button3_click(this)\" type=\"button\" id=\"" +"" + user.u_id +
                        "\"\n" +
                        "                                style=\"background-color: #f26522; border-color:#f26522 \">\n" +
                        "                            <i class=\"fa fa-commenting\"></i><span class=\"padding_10\">解冻";
                }
                html = html + "<div class=\"row\"\n" +
                    "                 style=\"background-color: #ffffff;padding: 10px;box-shadow: 0px 0 30px 10px #f0f0f0;margin-bottom: 20px;\">\n" +
                    "                <div class=\"col-10\">\n" +
                    "                    <div class=\"row\">\n" +
                    "                        <div class=\"col-2\" style=\"padding-top: 15px;\"><h6>姓名：" +
                    user.u_name +
                    "</h6></div>\n" +
                    "                        <div class=\"col-4\" style=\"padding-top: 15px;\"><h6>Email：" +
                    user.u_email +
                    "</h6></div>\n" +
                    "                        <div class=\"col-4\" style=\"padding-top: 15px;\"><h6>注册时间：" +
                    date.format("YYYY-MM-DD HH:MM:SS") +
                    "</h6></div>\n" +
                    "                        <div class=\"col-2\" style=\"padding-top: 15px;\"><h6>id：" +
                    user.u_id +
                    "</h6></div>\n" +
                    "                    </div>\n" +
                    "                </div>\n" +
                    "                <div class=\"input-group col-2\">\n" +
                    "                    <div class=\"input-group-append\">\n" +
                    html_state +
                    "</span>\n" +
                    "                        </button>\n" +
                    "                        <button class=\"btn btn-secondary\" onclick=\"button2_click(this)\" type=\"button\" id=\"" +
                    user.u_id +
                    "\"\n" +
                    "                                style=\"background-color: #f26522; border-color:#f26522 \">\n" +
                    "                            <i class=\"fa fa-commenting\"></i><span class=\"padding_10\">删除</span>\n" +
                    "                        </button>\n" +
                    "                    </div>\n" +
                    "                </div>\n" +
                    "            </div>";
            }
            document.getElementById("user").innerHTML = html;
        })
    }

    function button2_click(button) {
        $.get("/di", {u_id: button.id}, function (users) {
            var html = "";
            for (var user of users) {
                var date = new Date(user.u_date);
                if (user.u_state == 1) {
                    var html_state = "<button class=\"btn btn-secondary\" onclick=\"button1_click(this)\" type=\"button\" id=\"" +
                        "" + user.u_id +
                        "\"\n" +
                        "                                style=\"background-color: #f26522; border-color:#f26522 \">\n" +
                        "                            <i class=\"fa fa-commenting\"></i><span class=\"padding_10\">冻结";
                } else {
                    var html_state = "<button class=\"btn btn-secondary\" onclick=\"button3_click(this)\" type=\"button\" id=\"" +"" + user.u_id +
                        "\"\n" +
                        "                                style=\"background-color: #f26522; border-color:#f26522 \">\n" +
                        "                            <i class=\"fa fa-commenting\"></i><span class=\"padding_10\">解冻";
                }
                html = html + "<div class=\"row\"\n" +
                    "                 style=\"background-color: #ffffff;padding: 10px;box-shadow: 0px 0 30px 10px #f0f0f0;margin-bottom: 20px;\">\n" +
                    "                <div class=\"col-10\">\n" +
                    "                    <div class=\"row\">\n" +
                    "                        <div class=\"col-2\" style=\"padding-top: 15px;\"><h6>姓名：" +
                    user.u_name +
                    "</h6></div>\n" +
                    "                        <div class=\"col-4\" style=\"padding-top: 15px;\"><h6>Email：" +
                    user.u_email +
                    "</h6></div>\n" +
                    "                        <div class=\"col-4\" style=\"padding-top: 15px;\"><h6>注册时间：" +
                    date.format("YYYY-MM-DD HH:MM:SS") +
                    "</h6></div>\n" +
                    "                        <div class=\"col-2\" style=\"padding-top: 15px;\"><h6>id：" +
                    user.u_id +
                    "</h6></div>\n" +
                    "                    </div>\n" +
                    "                </div>\n" +
                    "                <div class=\"input-group col-2\">\n" +
                    "                    <div class=\"input-group-append\">\n" +
                    html_state +
                    "</span>\n" +
                    "                        </button>\n" +
                    "                        <button class=\"btn btn-secondary\" onclick=\"button2_click(this)\" type=\"button\" id=\"" +
                    user.u_id +
                    "\"\n" +
                    "                                style=\"background-color: #f26522; border-color:#f26522 \">\n" +
                    "                            <i class=\"fa fa-commenting\"></i><span class=\"padding_10\">删除</span>\n" +
                    "                        </button>\n" +
                    "                    </div>\n" +
                    "                </div>\n" +
                    "            </div>";
            }
            document.getElementById("user").innerHTML = html;
        })
    }

    function searchUser() {
        $.get("/dj", {searchText: document.getElementById('searchText').value}, function (users) {
            var html = "";
            for (var user of users) {
                var date = new Date(user.u_date);
                if (user.u_state == 1) {
                    var html_state = "<button class=\"btn btn-secondary\" onclick=\"button1_click(this)\" type=\"button\" id=\"" +
                        "" + user.u_id +
                        "\"\n" +
                        "                                style=\"background-color: #f26522; border-color:#f26522 \">\n" +
                        "                            <i class=\"fa fa-commenting\"></i><span class=\"padding_10\">冻结";
                } else {
                    var html_state = "<button class=\"btn btn-secondary\" onclick=\"button3_click(this)\" type=\"button\" id=\"" +"" + user.u_id +
                        "\"\n" +
                        "                                style=\"background-color: #f26522; border-color:#f26522 \">\n" +
                        "                            <i class=\"fa fa-commenting\"></i><span class=\"padding_10\">解冻";
                }
                html = html + "<div class=\"row\"\n" +
                    "                 style=\"background-color: #ffffff;padding: 10px;box-shadow: 0px 0 30px 10px #f0f0f0;margin-bottom: 20px;\">\n" +
                    "                <div class=\"col-10\">\n" +
                    "                    <div class=\"row\">\n" +
                    "                        <div class=\"col-2\" style=\"padding-top: 15px;\"><h6>姓名：" +
                    user.u_name +
                    "</h6></div>\n" +
                    "                        <div class=\"col-4\" style=\"padding-top: 15px;\"><h6>Email：" +
                    user.u_email +
                    "</h6></div>\n" +
                    "                        <div class=\"col-4\" style=\"padding-top: 15px;\"><h6>注册时间：" +
                    date.format("YYYY-MM-DD HH:MM:SS") +
                    "</h6></div>\n" +
                    "                        <div class=\"col-2\" style=\"padding-top: 15px;\"><h6>id：" +
                    user.u_id +
                    "</h6></div>\n" +
                    "                    </div>\n" +
                    "                </div>\n" +
                    "                <div class=\"input-group col-2\">\n" +
                    "                    <div class=\"input-group-append\">\n" +
                    html_state +
                    "</span>\n" +
                    "                        </button>\n" +
                    "                        <button class=\"btn btn-secondary\" onclick=\"button2_click(this)\" type=\"button\" id=\"" +
                    user.u_id +
                    "\"\n" +
                    "                                style=\"background-color: #f26522; border-color:#f26522 \">\n" +
                    "                            <i class=\"fa fa-commenting\"></i><span class=\"padding_10\">删除</span>\n" +
                    "                        </button>\n" +
                    "                    </div>\n" +
                    "                </div>\n" +
                    "            </div>";
            }
            document.getElementById("user").innerHTML = html;
        })
    }

    // $("#downloadButton").click(function () {
    //     $.get("/dc/" + document.getElementById("IDText").value, {}, function (article) {
    //         var data = document.getElementById("data");
    //         var catalogText = document.getElementById("catalogText");
    //         var nameText = document.getElementById("nameText");
    //         data.value = article.t_data;
    //         catalogText.value = article.t_fname;
    //         nameText.value = article.t_cname;
    //
    //     })
    // })
    //
    // $("#deleteButton").click(function () {
    //     $.get("/de/" + document.getElementById("IDText").value, {}, function (message) {
    //         alert(message);
    //     })
    // })
    //
    // $("#uploadButton").click(function () {
    //     var IDText = document.getElementById("IDText");
    //     var data = document.getElementById("data");
    //     var catalogText = document.getElementById("catalogText");
    //     var nameText = document.getElementById("nameText");
    //     if (IDText.value == "") {
    //         $.get("/dd", {
    //             t_id: 0,
    //             t_data: data.value,
    //             t_fname: catalogText.value,
    //             t_cname: nameText.value
    //         }, function (message) {
    //             alert(message);
    //         })
    //     } else {
    //         $.get("/dd", {
    //             t_id: IDText.value,
    //             t_data: data.value,
    //             t_fname: catalogText.value,
    //             t_cname: nameText.value
    //         }, function (message) {
    //             alert(message);
    //         })
    //     }
    // })


</script>

<script src="/js/jquery.min.js"></script>
<script src="/js/popper.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script src="/js/main.js"></script>
</body>
</html>