<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- basic -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- mobile metas -->
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1">
    <!-- site metas -->
    <title>Eflyer</title>
    <meta name="keywords" content="">
    <meta name="description" content="">
    <meta name="author" content="">
    <!-- bootstrap css -->
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <!-- style css -->
    <link rel="stylesheet" type="text/css" href="/css/style.css">
    <!-- Responsive-->
    <link rel="stylesheet" href="/css/responsive.css">
    <!-- fevicon -->
    <link rel="icon" href="/images/fevicon.png" type="image/gif"/>
    <!-- Scrollbar Custom CSS -->
    <link rel="stylesheet" href="/css/jquery.mCustomScrollbar.min.css">
    <!-- Tweaks for older IEs-->
    <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css">
    <!-- fonts -->
    <link href="https://fonts.googleapis.com/css?family=Poppins:400,700&display=swap" rel="stylesheet">
    <!-- font awesome -->
    <link rel="stylesheet" type="text/css"
          href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!--  -->
    <!-- owl stylesheets -->
    <link href="https://fonts.googleapis.com/css?family=Great+Vibes|Poppins:400,700&display=swap&subset=latin-ext"
          rel="stylesheet">
    <link rel="stylesheet" href="/css/owl.carousel.min.css">
    <link rel="stylesoeet" href="/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/2.1.5/jquery.fancybox.min.css"
          media="screen">
</head>
<body>
<!-- banner bg main start -->
<div class="banner_bg_main">
    <!-- header top section start -->
    <div class="container">
        <div class="header_section_top">
            <div class="row">
                <div class="col-sm-12">
                    <div class="custom_menu">
                        <ul>
                            <li><a href="#">主页</a></li>
                            <li><a href="#">图文教程</a></li>
                            <li><a href="#">视频课程</a></li>
                            <li><a href="#">资讯</a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- header top section start -->
    <!-- logo section start -->
    <div class="logo_section">
        <div class="container">
            <div class="row">
                <div class="col-sm-12">
                    <div class="logo"><a href="/index.html"><img src="/images/logo.png"></a></div>
                </div>
            </div>
        </div>
    </div>
    <!-- logo section end -->
    <!-- header section start -->
    <div class="header_section">
        <div class="container">
            <div class="containt_main">
                <div id="mySidenav" class="sidenav">
                    <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">&times;</a>
                    <a href="/index.html">主页</a>
                    <a href="#" th:href="'/article/'+${catalog.t_id}" th:each="catalog:${catalogs}"
                       th:text="${catalog.t_cname}"></a>
                </div>
                <span class="toggle_icon" onclick="openNav()"><img src="/images/toggle-icon.png"></span>
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton"
                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">简体中文
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <a class="dropdown-item" href="#">English</a>
                        <a class="dropdown-item" href="#">Germany</a>
                        <a class="dropdown-item" href="#">România</a>
                    </div>
                </div>
                <div class="main">
                    <!-- Another variation with a button -->
                    <form method="get" th:action="@{/search}">
                        <div class="input-group">
                            <input type="text" class="form-control" name="keyword" placeholder="搜一下你想找的">
                            <div class="input-group-append">
                                <button class="btn btn-secondary" type="submit"
                                        style="background-color: #f26522; border-color:#f26522 ">
                                    <i class="fa fa-search"></i>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="header_box">
                    <div class="lang_box ">
                        <!--                        <a href="#" title="Language" class="nav-link" data-toggle="dropdown" aria-expanded="true">-->
                        <!--                            <img src="/images/flag-uk.png" alt="flag" class="mr-2 " title="United Kingdom"> English <i-->
                        <!--                                class="fa fa-angle-down ml-2" aria-hidden="true"></i>-->
                        <!--                        </a>-->
                        <!--                        <div class="dropdown-menu ">-->
                        <!--                            <a href="#" class="dropdown-item">-->
                        <!--                                <img src="/images/flag-france.png" class="mr-2" alt="flag">-->
                        <!--                                French-->
                        <!--                            </a>-->
                        <!--                        </div>-->
                        <a href="#" title="Language" class="nav-link" data-toggle="dropdown" aria-expanded="true">
                            形式分类
                            <i class="fa fa-angle-down ml-2" aria-hidden="true"></i>
                        </a>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                            <a class="dropdown-item" href="#">图文教程</a>
                            <a class="dropdown-item" href="#">视频课程</a>
                            <a class="dropdown-item" href="#">资讯</a>
                        </div>
                    </div>
                    <div class="login_menu">
                        <ul>
                            <li><a href="#">
                                <p style="display: none" id="loginUserID" th:text="${session.loginUser.u_id}"></p>
                                <i class="fa fa-user" aria-hidden="true"></i>
                                <span class="padding_10" th:text="${session.loginUser.u_name}">Cart</span></a>
                            </li>
                            <li th:if="${session.loginUser.u_name} ne '登录'"><a href="/user/logoff">
                                <span class="padding_10">退出</span></a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- header section end -->
    <p></p>
</div>
<!-- banner bg main end -->
<div class="fashion_section">
    <div class="carousel">
        <div class="carousel-inner">
            <div class="container">
                <div class="fashion_section_2">
                    <div class="row">
                        <div class="col-lg-9" id="articleDiv">
                            <div class="box_main">
                                <div class="entry-content">
                                    <div th:utext="${article.getT_html()}"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3" id="sliderDiv">
                            <div class="dropdown-comment">
                                <div class="" style="width: 277px;" id="wrap">
                                    <div class="box_main" id="hotArticle">
                                        <h2>热门文章</h2>
                                        <div th:each="hotArticle:${hotArticles}">
                                            <a th:href="'/article/'+${hotArticle.t_id}">
                                                <h4 th:text="${hotArticle.t_cname}">
                                                </h4>
                                            </a>
                                        </div>
                                    </div>

                                    <div class="box_main_2" id="commentDiv">
                                        <h2>评论</h2>

                                        <div id="divContainer">
                                        </div>

                                        <div>
                                            <div class="input-group">
                                                <input id="commentText" type="text" class="form-control"
                                                       placeholder="输入评论">
                                                <div class="input-group-append">
                                                    <button class="btn btn-secondary" type="button" id="commentButton"
                                                            style="background-color: #f26522; border-color:#f26522 ">
                                                        <i class="fa fa-commenting"></i>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>

                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- footer section start -->
<div class="footer_section layout_padding">
    <div class="container">
        <div class="footer_logo"><a href="index.html"><img src="/images/footer-logo.png"></a></div>
        <div class="input_bt">
            <input type="text" class="mail_bt" placeholder="Your Email" name="Your Email">
            <span class="subscribe_bt" id="basic-addon2"><a href="#">Subscribe</a></span>
        </div>
        <div class="footer_menu">
            <ul>
                <li><a href="#">Best Sellers</a></li>
                <li><a href="#">Gift Ideas</a></li>
                <li><a href="#">New Releases</a></li>
                <li><a href="#">Today's Deals</a></li>
                <li><a href="#">Customer Service</a></li>
            </ul>
        </div>
        <div class="location_main">Help Line Number : <a href="#">+1 1800 1200 1200</a></div>
    </div>
</div>
<!-- footer section end -->
<!-- copyright section start -->
<div class="copyright_section">
    <div class="container">
        <p class="copyright_text">© 2020 All Rights Reserved. Design by <a href="https://html.design">Free html
            Templates</a></p>
    </div>
</div>
<!-- copyright section end -->
<!-- Javascript files-->
<script src="/js/jquery.min.js"></script>
<script src="/js/popper.min.js"></script>
<script src="/js/bootstrap.bundle.min.js"></script>
<script src="/js/jquery-3.0.0.min.js"></script>
<script src="/js/plugin.js"></script>
<!-- sidebar -->
<script src="/js/jquery.mCustomScrollbar.concat.min.js"></script>
<script src="/js/custom.js"></script>
<script>
    function openNav() {
        document.getElementById("mySidenav").style.width = "250px";
    }

    function closeNav() {
        document.getElementById("mySidenav").style.width = "0";
    }

    Date.prototype.format = function (fmt) {
        var o = {
            "M+": this.getMonth() + 1,                   //月份
            "d+": this.getDate(),                        //日
            "h+": this.getHours(),                       //小时
            "m+": this.getMinutes(),                     //分
            "s+": this.getSeconds(),                     //秒
            "q+": Math.floor((this.getMonth() + 3) / 3), //季度
            "S": this.getMilliseconds()                  //毫秒
        };

        //  获取年份
        // ①
        if (/(y+)/i.test(fmt)) {
            fmt = fmt.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
        }

        for (var k in o) {
            // ②
            if (new RegExp("(" + k + ")", "i").test(fmt)) {
                fmt = fmt.replace(
                    RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : (("00" + o[k]).substr(("" + o[k]).length)));
            }
        }
        return fmt;
    }

    $(document).ready(function () {
        $.get("/a/" + ((window.location.pathname.charAt(window.location.pathname.length - 2) == "/")?"":window.location.pathname.charAt(window.location.pathname.length - 2)) + window.location.pathname.charAt(window.location.pathname.length - 1), {}, function (comments) {
            var html = "";
            for (var comment of comments) {
                var date = new Date(comment.c_time);
                html = html + "<div><div style=\"border-color: #3e3e3e;border-width: 1px 0 0 0;border-style: solid none;height: 10px;width: 100%;\"></div><div class=\"row\"><div class=\"col-lg-5\"> <a href=\"/user/" + comment.u_id + "\" >" + comment.u_name + "</a> </div> <div class=\"col-lg-7\" style=\"text-align: right;\"> <h6> " + date.format("YYYY-MM-DD") + "</h6> </div> <div class=\"col-lg-12\"> <h4>" + comment.c_text + "</h4> </div> </div> </div>"
            }
            document.getElementById("divContainer").innerHTML = html;
        })
    })

    $("#commentButton").click(function () {
        if (document.getElementById('commentText').value != "") {
            if (document.getElementById("loginUserID").innerText != 0) {

                $.get("/c/" + document.getElementById("commentText").value + "/" + ((window.location.pathname.charAt(window.location.pathname.length - 2) == "/")?"":window.location.pathname.charAt(window.location.pathname.length - 2)) + window.location.pathname.charAt(window.location.pathname.length - 1) + "/" + document.getElementById("loginUserID").innerText, {}, function (comments) {

                    var html = "";
                    for (var comment of comments) {
                        var date = new Date(comment.c_time);
                        html = html + "<div><div style=\"border-color: #3e3e3e;border-width: 1px 0 0 0;border-style: solid none;height: 10px;width: 100%;\"></div><div class=\"row\"><div class=\"col-lg-5\"> <a href=\"/user/" + comment.u_id + "\" >" + comment.u_name + "</a> </div> <div class=\"col-lg-7\" style=\"text-align: right;\"> <h6> " + date.format("YYYY-MM-DD") + "</h6> </div> <div class=\"col-lg-12\"> <h4>" + comment.c_text + "</h4> </div> </div> </div>"
                    }
                    document.getElementById("divContainer").innerHTML = html;

                })
            } else {
                alert("未登录");
            }
        }else {
            alert("不得为空");
        }
    })

    $(window).scroll(function () {
        var menu_top = $('#head').offset().top;
        var div = document.getElementById("sliderDiv");
        var artDiv = document.getElementById("articleDiv");

        var hot_Div = document.getElementById("hotArticle");
        var comDiv = document.getElementById("commentDiv");
        if (artDiv.offsetHeight < div.offsetHeight) {
            div.style.position = 'inherit';
            div.style.top = '0px';
        } else if ($(window).scrollTop() < 220) {
            // $('.null-ad').addClass('wrap-ad');
            // $('.null-ad').removeClass('null-ad');
            div.style.position = 'inherit';
            div.style.top = '0px';
        } else if ($(window).scrollTop() > 220 + artDiv.offsetHeight - (hot_Div.offsetHeight + comDiv.offsetHeight)) {
            div.style.position = 'relative';
            div.style.top = (artDiv.offsetHeight - (hot_Div.offsetHeight + comDiv.offsetHeight) - 40) + 'px';
        } else if ($(window).scrollTop() >= 220) {
            div.style.position = 'relative';
            div.style.top = $(window).scrollTop() - 220 + 'px';
        } else {
            // $('.wrap-ad').addClass('null-ad');
            // $('.null-ad').removeClass('wrap-ad');
        }
    });

    function setDivHeight() {
        var div = document.getElementById("commentDiv");
        var hot = document.getElementById("hotArticle");
        var comDiv = document.getElementById("divContainer");
        div.style.height = window.outerHeight - hot.offsetHeight - 150 + 'px';
        comDiv.style.height = div.offsetHeight - 120 + 'px';
    }

    function hideDiv() {
        var div = document.getElementById("sliderDiv");
        if ($(window).width() < 992) {

            div.style.display = 'none';
        } else {
            div.style.display = '';
        }
    }

    window.onload = setDivHeight;
    window.onresize = setDivHeight;
    window.onresize = hideDiv;
</script>
</body>
</html>